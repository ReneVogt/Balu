<Project>
	<Import Project="Sdk.props" Sdk="Microsoft.NET.Sdk" />
  
	<Target Name="Build">
		<!-- this will override the default Build target. -->
	</Target>
	
	<PropertyGroup>
		<TargetFramework>netcoreapp3.1</TargetFramework>
		<OutputType>Exe</OutputType>
	</PropertyGroup>

	<PropertyGroup>
		<DefaultLanguageSourceExtension>.b</DefaultLanguageSourceExtension>
		<GenerateAssemblyInfo>false</GenerateAssemblyInfo>
	</PropertyGroup>

	<ItemGroup>
	  <Compile Include="hello.b" />
	</ItemGroup>

	<ItemGroup>
		<ProjectReference Include="..\bc\bc.csproj" />
	</ItemGroup>

	<Import Project="Sdk.targets" Sdk="Microsoft.NET.Sdk" />

	<Target Name="CreateManifestResourceNames" />

	<Target Name="CoreCompile">
		<ItemGroup>
			<OnlyBaluFiles Include="@(Compile)" Condition="'%(Extension)'=='.b'" />
		</ItemGroup>
		<Message Importance="High" Text="Starting Balu compilation for @(OnlyBaluFiles->'&quot;%(Identity)&quot;', ' ')" />
		<Exec Command="&quot;$(MSBuildThisFileDirectory)\..\bc\bin\Debug\netcoreapp3.1\bc.exe&quot; @(OnlyBaluFiles->'&quot;%(Identity)&quot;', ' ') /o &quot;@(IntermediateAssembly)&quot; @(ReferencePath->'/r &quot;%(Identity)&quot;', ' ')" WorkingDirectory="$(MSBuildProjectDirectory)" />
	</Target>

</Project>
